<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <title>Th·ªß Thi√™m Garden 3D - Digital Twin</title>

    <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/light/main.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://js.arcgis.com/4.29/"></script>

    <style>
        html, body, #viewDiv { padding: 0; margin: 0; height: 100%; width: 100%; font-family: 'Roboto', sans-serif; }
        
        /* Sidebar ƒëi·ªÅu khi·ªÉn (B√™n tr√°i) */
        #controlPanel {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 300px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 99;
        }

        /* B·∫£ng k·∫øt qu·∫£ t√¨m ki·∫øm (B√™n ph·∫£i - M·ªöI TH√äM) */
        #resultPanel {
            position: absolute;
            top: 20px;
            right: 60px; /* N√© n√∫t Slice tool */
            width: 300px;
            max-height: 80vh; /* Gi·ªõi h·∫°n chi·ªÅu cao */
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 90;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        #resultHeader {
            padding: 15px;
            background: #2c3e50;
            color: white;
            font-weight: bold;
            border-bottom: 1px solid #eee;
        }

        #resultList {
            overflow-y: auto; /* Cho ph√©p cu·ªôn */
            flex: 1;
        }

        /* Item trong danh s√°ch k·∫øt qu·∫£ */
        .result-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .result-item:hover { background: #f1f2f6; }
        .item-code { font-weight: bold; color: #2980b9; }
        .item-price { color: #e67e22; font-size: 0.9em; }
        .item-status { font-size: 0.8em; padding: 2px 6px; border-radius: 4px; }
        .st-0 { background: #2ecc71; color: white; } /* Tr·ªëng */
        .st-1 { background: #e74c3c; color: white; } /* ƒê√£ thu√™ */

        /* Style chung */
        h2 { margin: 0 0 15px 0; font-size: 18px; color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 5px; }
        .filter-group { margin-bottom: 15px; }
        .filter-group label { display: block; font-weight: 500; margin-bottom: 5px; font-size: 14px; }
        select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        
        .btn-search {
            width: 100%;
            padding: 10px;
            background: #2980b9;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }
        .btn-search:hover { background: #3498db; }

        .legend { display: flex; gap: 10px; margin-top: 15px; font-size: 12px; }
        .legend-item { display: flex; align-items: center; }
        .dot { width: 12px; height: 12px; border-radius: 50%; margin-right: 5px; }
    </style>
</head>
<body>
    <div id="viewDiv"></div>

    <div id="controlPanel">
        <h2>üîç T√¨m ki·∫øm CƒÉn h·ªô</h2>
        
        <div class="filter-group">
            <label>Ch·ªçn Block:</label>
            <select id="selBlock">
                <option value="All">T·∫•t c·∫£</option>
                <option value="A">Block A</option>
                <option value="B">Block B</option>
            </select>
        </div>

        <div class="filter-group">
            <label>Tr·∫°ng th√°i:</label>
            <select id="selStatus">
                <option value="All">T·∫•t c·∫£</option>
                <option value="0">üü¢ C√≤n tr·ªëng (Available)</option>
                <option value="1">üî¥ ƒê√£ thu√™ (Rented)</option>
            </select>
        </div>

        <div class="filter-group">
            <label>M·ª©c gi√° thu√™ (VNƒê/th√°ng):</label>
            <select id="selPrice">
                <option value="All">T·∫•t c·∫£ m·ª©c gi√°</option>
                <option value="6500000">6.500.000 VNƒê (1 PN)</option>
                <option value="7500000">7.500.000 VNƒê (2 PN)</option>
                <option value="9000000">9.000.000 VNƒê (3 PN)</option>
            </select>
        </div>

        <button class="btn-search" id="btnFilter">L·ªåC K·∫æT QU·∫¢</button>

        <div class="legend">
            <div class="legend-item"><div class="dot" style="background:#2ecc71"></div>Tr·ªëng</div>
            <div class="legend-item"><div class="dot" style="background:#e74c3c"></div>ƒê√£ thu√™</div>
            <div class="legend-item"><div class="dot" style="background:#3498db"></div>S·∫£nh</div>
        </div>
    </div>

    <div id="resultPanel">
        <div id="resultHeader">K·∫øt qu·∫£ t√¨m ki·∫øm (<span id="resCount">0</span>)</div>
        <div id="resultList">
            <div style="padding:15px; text-align:center; color:#7f8c8d">Vui l√≤ng b·∫•m L·ªçc...</div>
        </div>
    </div>

    <script type="module" src="./src/main.js"></script>

    </body>
</html>